<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>API Test - YouTube bnVUHWCynig</title>
    <style>
        body {
            font-family: Arial, sans-serif;
            max-width: 1200px;
            margin: 40px auto;
            padding: 20px;
            background: #f5f5f5;
        }
        .test-panel {
            background: white;
            padding: 20px;
            border-radius: 8px;
            box-shadow: 0 2px 8px rgba(0,0,0,0.1);
            margin-bottom: 20px;
        }
        button {
            background: #3b82f6;
            color: white;
            border: none;
            padding: 10px 20px;
            border-radius: 6px;
            cursor: pointer;
            margin: 5px;
            font-size: 14px;
        }
        button:hover {
            background: #2563eb;
        }
        .result {
            background: #f8f9fa;
            padding: 15px;
            border-radius: 6px;
            margin: 10px 0;
            border-left: 4px solid #3b82f6;
        }
        .error {
            border-left-color: #ef4444;
            background: #fef2f2;
        }
        .success {
            border-left-color: #10b981;
            background: #f0fdf4;
        }
        pre {
            background: #1f2937;
            color: #f9fafb;
            padding: 15px;
            border-radius: 6px;
            overflow-x: auto;
            font-size: 12px;
            max-height: 400px;
            overflow-y: auto;
        }
        .video-info {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 15px;
            margin: 15px 0;
        }
        .video-info div {
            background: #f8f9fa;
            padding: 10px;
            border-radius: 4px;
        }
        .video-info strong {
            display: block;
            color: #374151;
            font-size: 12px;
            margin-bottom: 5px;
        }
    </style>
</head>
<body>
    <h1>üß™ YouTube Video API Test - bnVUHWCynig</h1>
    <p>Testing the video with 1,701,428,115 views to see what metadata we can fetch.</p>
    
    <div class="test-panel">
        <h3>üîç API Tests</h3>
        <button onclick="testGoogleCustomSearch()">Test Google Custom Search API</button>
        <button onclick="testYouTubeDirectAPI()">Test YouTube Data API v3 Direct</button>
        <button onclick="testYouTubeSearch()">Test YouTube Search API</button>
        <button onclick="clearResults()">Clear Results</button>
        <div id="results"></div>
    </div>

    <div class="test-panel">
        <h3>üìù Known Information</h3>
        <div class="video-info">
            <div>
                <strong>Video ID:</strong>
                bnVUHWCynig
            </div>
            <div>
                <strong>Expected Views:</strong>
                1,701,428,115
            </div>
            <div>
                <strong>Expected Title:</strong>
                Baby Shark Dance | Sing and Dance! | @Baby Shark Official | PINKFONG Songs for Children
            </div>
            <div>
                <strong>Expected Channel:</strong>
                Pinkfong Baby Shark - Kids' Songs & Stories
            </div>
        </div>
    </div>

    <script>
        const API_KEYS = {
            youtube: 'AIzaSyD8w8cpJ7BP-L-Tftt8BKFBgp--nd0zcdg',
            googleSearch: 'AIzaSyDo2zq98fZbNEgjkdsYGAZs-CJcfSBz9OQ',
            searchEngineId: '61201925358ea4e83'
        };

        function showResult(title, content, type = 'info') {
            const results = document.getElementById('results');
            const div = document.createElement('div');
            div.className = `result ${type}`;
            div.innerHTML = `
                <h4>${title}</h4>
                <div>${content}</div>
            `;
            results.appendChild(div);
        }

        function clearResults() {
            document.getElementById('results').innerHTML = '';
        }

        async function testGoogleCustomSearch() {
            showResult('üîç Google Custom Search Test', 'Starting Google Custom Search API test...');
            
            try {
                const url = `https://www.googleapis.com/customsearch/v1?key=${API_KEYS.googleSearch}&cx=${API_KEYS.searchEngineId}&q=site:youtube.com/watch bnVUHWCynig&num=1`;
                
                showResult('üì° Request URL', `<code>${url.replace(API_KEYS.googleSearch, '[API_KEY]')}</code>`);
                
                const response = await fetch(url);
                const data = await response.json();
                
                if (response.ok) {
                    showResult('‚úÖ Google Custom Search Success', `
                        <strong>Response:</strong>
                        <pre>${JSON.stringify(data, null, 2)}</pre>
                    `, 'success');
                    
                    if (data.items && data.items[0]) {
                        const item = data.items[0];
                        showResult('üìä Extracted Data', `
                            <div class="video-info">
                                <div><strong>Title:</strong> ${item.title}</div>
                                <div><strong>Link:</strong> ${item.link}</div>
                                <div><strong>Snippet:</strong> ${item.snippet}</div>
                                <div><strong>Thumbnail:</strong> ${item.pagemap?.cse_thumbnail?.[0]?.src || 'None'}</div>
                            </div>
                        `, 'success');
                    }
                } else {
                    showResult('‚ùå Google Custom Search Error', `
                        <strong>Status:</strong> ${response.status}<br>
                        <strong>Response:</strong>
                        <pre>${JSON.stringify(data, null, 2)}</pre>
                    `, 'error');
                }
            } catch (error) {
                showResult('‚ùå Google Custom Search Error', `
                    <strong>Error:</strong> ${error.message}<br>
                    <strong>Note:</strong> This might be due to CORS. This would work from the server.
                `, 'error');
            }
        }

        async function testYouTubeDirectAPI() {
            showResult('üéØ YouTube Data API v3 Test', 'Testing direct video details fetch...');
            
            try {
                const url = `https://www.googleapis.com/youtube/v3/videos?key=${API_KEYS.youtube}&part=snippet,statistics,contentDetails&id=bnVUHWCynig`;
                
                showResult('üì° Request URL', `<code>${url.replace(API_KEYS.youtube, '[API_KEY]')}</code>`);
                
                const response = await fetch(url);
                const data = await response.json();
                
                if (response.ok && data.items && data.items[0]) {
                    const video = data.items[0];
                    showResult('‚úÖ YouTube API Success', `
                        <div class="video-info">
                            <div><strong>Title:</strong> ${video.snippet.title}</div>
                            <div><strong>Channel:</strong> ${video.snippet.channelTitle}</div>
                            <div><strong>Views:</strong> ${parseInt(video.statistics.viewCount).toLocaleString()}</div>
                            <div><strong>Likes:</strong> ${parseInt(video.statistics.likeCount || 0).toLocaleString()}</div>
                            <div><strong>Published:</strong> ${video.snippet.publishedAt}</div>
                            <div><strong>Duration:</strong> ${video.contentDetails.duration}</div>
                        </div>
                        <strong>Full Response:</strong>
                        <pre>${JSON.stringify(video, null, 2)}</pre>
                    `, 'success');
                } else {
                    showResult('‚ùå YouTube API Error', `
                        <strong>Status:</strong> ${response.status}<br>
                        <strong>Response:</strong>
                        <pre>${JSON.stringify(data, null, 2)}</pre>
                    `, 'error');
                }
            } catch (error) {
                showResult('‚ùå YouTube API Error', `
                    <strong>Error:</strong> ${error.message}<br>
                    <strong>Note:</strong> This might be due to CORS. This would work from the server.
                `, 'error');
            }
        }

        async function testYouTubeSearch() {
            showResult('üîç YouTube Search API Test', 'Testing YouTube search for the video...');
            
            try {
                const url = `https://www.googleapis.com/youtube/v3/search?key=${API_KEYS.youtube}&part=snippet&q=bnVUHWCynig&type=video&maxResults=1`;
                
                showResult('üì° Request URL', `<code>${url.replace(API_KEYS.youtube, '[API_KEY]')}</code>`);
                
                const response = await fetch(url);
                const data = await response.json();
                
                if (response.ok) {
                    showResult('‚úÖ YouTube Search Success', `
                        <strong>Response:</strong>
                        <pre>${JSON.stringify(data, null, 2)}</pre>
                    `, 'success');
                } else {
                    showResult('‚ùå YouTube Search Error', `
                        <strong>Status:</strong> ${response.status}<br>
                        <strong>Response:</strong>
                        <pre>${JSON.stringify(data, null, 2)}</pre>
                    `, 'error');
                }
            } catch (error) {
                showResult('‚ùå YouTube Search Error', `
                    <strong>Error:</strong> ${error.message}<br>
                    <strong>Note:</strong> This might be due to CORS. This would work from the server.
                `, 'error');
            }
        }

        // Initial message
        showResult('üöÄ API Test Ready', 'Click the buttons above to test different API endpoints. The APIs might be blocked by CORS in the browser, but this will show you the request URLs and help debug the issue.');
    </script>
</body>
</html>
